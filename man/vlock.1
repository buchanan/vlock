.TH VLOCK 1 "28 July 2007" "Linux" "Linux User's Manual"
.SH NAME
vlock \- Virtual Console lock program
.SH SYNOPSIS
.B vlock [ -hv ]
.PP
.B vlock [ -acns ] [ -t <timeout> ] [ plugins... ]
.SH DESCRIPTION
.B vlock
is a program to lock one or more sessions on the Linux console.  This is
especially useful for Linux machines which have multiple users with access
to the console.  One user may lock his or her session(s) while still allowing
other users to use the system on other virtual consoles.  If desired, the
entire console may be locked and virtual console switching disabled.
.PP
By default, only the current VC (virtual console) is locked.  With the
\fB-a,--all\fR option all VCs are locked.  The locked VCs cannot be unlocked
without the invoker's password or the root password.  The root password will
always be able to unlock any or all sessions, unless disabled at compile time.
.PP
Please note that it is entirely possible to completely lock yourself out of
the console with the \fB-a,--all\fR option if you cannot remember your
password!  Unless you are able to kill vlock by logging in remotely via a
serial terminal or network, a hard reset is the only method of ``unlocking''
the display.
.PP
When locking the entire console display it is sometimes still possible to kill
vlock using the Secure Access Key (SAK) or other commands that are available
through the SysRq mechanism.  When the \fB-s,--disable-sysrq\fR and
\fB-a,--all\fR options are given the SysRq mechanism is disabled while vlock is
running.  See /usr/src/linux/Documentation/sysrq.txt for more details.
.PP
\fBvlock\fR works for console sessions primarily.  To lock the entire console
display from an X session use the \fB-n,--new\fR option. \fBvlock\fR will then
switch to an empty virtual console before locking.  Giving this option implies
the \fB-a,--all\fR option.
.PP
The options \fB-n,--new\fR, \fB-s,--disable-sysrq\fR, and \fB-t,--timeout\fR
only work if vlock is compiled with plugin support.  See the PLUGINS section
for more information.
.SH OPTIONS
.B -a,--all
.IP
Lock all console sessions and disable VC switching.
.PP
.B -c,--current
.IP
Lock the current session (this is the default).
.PP
.B -n,--new
.IP
Switch to a new virtual console before locking all console sessions.
.PP
.B -s,--disable-sysrq
.IP
Disable sysrq while consoles are locked.  Does not have effect unless
the \fB-a,--all\fR option is also specified.
.PP
.B -t,--timeout <seconds>
.IP
Run screen saver plugins after the given timeout.  See the PLUGINS section for
more information.
.PP
.B -h,--help
.IP
Print a brief help message.
.PP
.B -v,--version
.IP
Print the version number of \fBvlock\fR.
.PP
.SH PLUGINS
If vlock is compiled with plugin support, it is possible to trigger custom
actions at certains points vlock locks the virtual console.  A plugin may be
called before or after vlock locks the console.  It may also be called while
the console is locked after the timeout given through the \fB-t,--timeout\fR
option or the Escape key is pressed.
.PP
The plugins that should be loaded by vlock may be given as command line
arguments or specified through enviroment variable \fBVLOCK_PLUGINS\fR (see
below).
.SH "ENVIRONMENT VARIABLES"
.B USER
.IP
When \fBvlock\fR is run as root (uid 0) and the \fBUSER\fR environment variable
is set, \fBvlock\fR prompts for this user's password.
.PP
.B VLOCK_MESSAGE
.IP
If this variable is set it will be printed before each password prompt.
.PP
.B VLOCK_ALL_MESSAGE
.B VLOCK_CURRENT_MESSAGE
.IP
Like \fBVLOCK_MESSAGE\fR but if you set these variables instead, \fBvlock\fR will
automatically choose the message.  \fBVLOCK_ALL_MESSAGE\fR is printed when all
sessions are locked and console switching is disabled. Otherwise
\fBVLOCK_CURRENT_MESSAGE\fR is printed.  These variables will only be used
if \fBVLOCK_MESSAGE\fR is unset.
.PP
.B VLOCK_PLUGINS
.IP
Set this variable to a space separated list of plugins that should be loaded
every time you run vlock.
.PP
.B VLOCK_PROMPT_TIMEOUT
.IP
Set this variable to specify the amount of time (in seconds) you will have to
enter your password at the password prompt.  \fBWarning\fR: If this value is too
low, you will have trouble unlocking your machine.
.PP
.B VLOCK_TIMEOUT
.IP
Set this variable to specify the timeout (in seconds) after which the screen
saver plugins (if any) will be invoked.
.PP
.SH FILES
.B ~/.vlockrc
.IP
If existent, this file is read by \fBvlock\fR on startup.  All the 
variables mentioned above can be set here.
.SH SECURITY
See the SECURITY file in the \fBvlock\fR distribution for more information.
.PP
.SH NOTES
Long options depend on the availability of an enhanced getopt(1) command.  On
systems without it only the short options will work and long options will cause
errors.
.PP
.SH "SEE ALSO"
.BR vlock-main (8),
.BR getopt (1)
.SH AUTHORS
Michael K. Johnson <http://danlj.org/mkj/>
.PP
Frank Benkstein <frank-vlock@benkstein.net>
